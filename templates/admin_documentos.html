{# 
  Esta plantilla extiende el dise√±o base y muestra la interfaz de administraci√≥n 
  con pesta√±as para visualizar, crear, exportar, editar y eliminar documentos tipo:
  Actas, Informes y Reportes.
#}
{% extends "base.html" %}
{% block content %}

<h2>Administraci√≥n de Documentos</h2>

{# Navegaci√≥n por pesta√±as utilizando Bootstrap #}
<ul class="nav nav-tabs" id="adminTabs" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="actas-tab" data-bs-toggle="tab" data-bs-target="#actas" type="button" role="tab">Actas</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="informes-tab" data-bs-toggle="tab" data-bs-target="#informes" type="button" role="tab">Informes</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="reportes-tab" data-bs-toggle="tab" data-bs-target="#reportes" type="button" role="tab">Reportes</button>
  </li>
</ul>

<div class="tab-content mt-3" id="adminTabsContent">

  <!-- Secci√≥n ACTAS -->
  <div class="tab-pane fade show active" id="actas" role="tabpanel">
    {# Bot√≥n para crear nueva acta #}
    <a href="/crear/actas" class="btn btn-success btn-sm mb-2">‚ûï Crear nueva acta</a>
    {# Bot√≥n para exportar actas a Excel #}
    <a href="/exportar_documentos/actas" class="btn btn-primary btn-sm mb-2 ms-2">üì• Exportar Actas a Excel</a>
    
    {# Tabla de visualizaci√≥n de actas #}
    <table class="table table-bordered table-hover">
      <thead class="table-dark">
        <tr><th>ID</th><th>Asunto</th><th>Fecha</th><th>Hora</th><th>Funcionario</th><th>Acciones</th></tr>
      </thead>
      <tbody>
        {# Iterar sobre las actas enviadas desde el backend #}
        {% for a in actas %}
          <tr>
            <td>{{ a[0] }}</td>  {# ID #}
            <td>{{ a[1] }}</td>  {# Asunto #}
            <td>{{ a[2] }}</td>  {# Fecha #}
            <td>{{ a[3] }}</td>  {# Hora #}
            <td>{{ a[4] }}</td>  {# Funcionario #}
            <td>
              {# Bot√≥n para editar acta #}
              <a href="/editar/actas/{{ a[0] }}" class="btn btn-sm btn-warning">Editar</a>
              {# Bot√≥n para eliminar acta con confirmaci√≥n #}
              <a href="/eliminar/actas/{{ a[0] }}" class="btn btn-sm btn-danger"
                 onclick="return confirm('¬øEliminar esta acta?');">Eliminar</a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Secci√≥n INFORMES -->
  <div class="tab-pane fade" id="informes" role="tabpanel">
    <a href="/crear/informes" class="btn btn-success btn-sm mb-2">‚ûï Crear nuevo informe</a>
    <a href="/exportar_documentos/informes" class="btn btn-primary btn-sm mb-2 ms-2">üì• Exportar Informes a Excel</a>
    <table class="table table-bordered table-hover">
      <thead class="table-dark">
        <tr><th>ID</th><th>Asunto</th><th>Fecha</th><th>Hora</th><th>Funcionario</th><th>Acciones</th></tr>
      </thead>
      <tbody>
        {% for i in informes %}
          <tr>
            <td>{{ i[0] }}</td>
            <td>{{ i[1] }}</td>
            <td>{{ i[2] }}</td>
            <td>{{ i[3] }}</td>
            <td>{{ i[4] }}</td>
            <td>
              <a href="/editar/informes/{{ i[0] }}" class="btn btn-sm btn-warning">Editar</a>
              <a href="/eliminar/informes/{{ i[0] }}" class="btn btn-sm btn-danger"
                 onclick="return confirm('¬øEliminar este informe?');">Eliminar</a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Secci√≥n REPORTES -->
  <div class="tab-pane fade" id="reportes" role="tabpanel">
    <a href="/crear/reportes" class="btn btn-success btn-sm mb-2">‚ûï Crear nuevo reporte</a>
    <a href="/exportar_documentos/reportes" class="btn btn-primary btn-sm mb-2 ms-2">üì• Exportar Reportes a Excel</a>
    <table class="table table-bordered table-hover">
      <thead class="table-dark">
        <tr><th>ID</th><th>Asunto</th><th>Fecha</th><th>Hora</th><th>Funcionario</th><th>Acciones</th></tr>
      </thead>
      <tbody>
        {% for r in reportes %}
          <tr>
            <td>{{ r[0] }}</td>
            <td>{{ r[1] }}</td>
            <td>{{ r[2] }}</td>
            <td>{{ r[3] }}</td>
            <td>{{ r[4] }}</td>
            <td>
              <a href="/editar/reportes/{{ r[0] }}" class="btn btn-sm btn-warning">Editar</a>
              <a href="/eliminar/reportes/{{ r[0] }}" class="btn btn-sm btn-danger"
                 onclick="return confirm('¬øEliminar este reporte?');">Eliminar</a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>

{% endblock %}
